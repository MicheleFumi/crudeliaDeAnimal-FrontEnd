<div class="container">
  <div class="d-flex justify-content-between align-items-center my-3">
    <h1 class="text-center">I tuoi animali</h1>
    <a class="btn btn-primary btn-sm" href="#" role="button">
      Aggiungi animale
    </a>
  </div>

  <div class="row">
    <div class="col-12" *ngFor="let animale of animali">
      <div class="card mb-3 shadow-sm">
        <div class="row g-0 align-items-center">
          <!-- Badge tipo animale -->
          <div
            class="col-md-2 d-flex justify-content-center align-items-center"
          >
            <span
              class="badge fs-6 px-3 py-2"
              [ngClass]="getBadgeClass(animale.tipo)"
            >
              {{ animale.tipo }}
            </span>
          </div>

          <!-- Info -->
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title">{{ animale.nomeAnimale }}</h5>
              <p class="card-text mb-1">
                <strong>Razza:</strong> {{ animale.razza }}
              </p>
              <p class="card-text">
                <strong>Note Mediche:</strong> {{ animale.noteMediche }}
              </p>
            </div>
          </div>

          <!-- Azioni -->
          <div class="col-md-2 text-center">
            <button
              class="btn btn-warning btn-sm me-1"
              data-bs-toggle="modal"
              data-bs-target="#exampleModalUpdate"
            >
              Modifica
            </button>
            <button
              class="btn btn-danger btn-sm"
              data-bs-toggle="modal"
              data-bs-target="#exampleModalDelete"
            >
              Elimina
            </button>
          </div>
        </div>
      </div>

      <!-- Modal Modifica -->
      <div class="modal fade" id="exampleModalUpdate" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Modifica {{ animale.nomeAnimale }}</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <form [formGroup]="updateForm" (ngSubmit)="OnUpdate()">
              <div class="modal-body">
                <input type="hidden" formControlName="utente" />

                <div class="mb-3">
                  <label class="form-label">Nome</label>
                  <input
                    type="text"
                    formControlName="nomeAnimale"
                    class="form-control"
                  />
                </div>

                <div class="mb-3">
                  <label class="form-label">Tipo</label>
                  <select formControlName="tipo" class="form-select">
                    <option *ngFor="let t of tipi" [ngValue]="t">
                      {{ t }}
                    </option>
                  </select>
                </div>

                <div class="mb-3">
                  <label class="form-label">Razza</label>
                  <input
                    type="text"
                    formControlName="razza"
                    class="form-control"
                  />
                </div>

                <div class="mb-3">
                  <label class="form-label">Note Mediche</label>
                  <textarea
                    formControlName="noteMediche"
                    class="form-control"
                  ></textarea>
                </div>
              </div>

              <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">
                  Chiudi
                </button>
                <button class="btn btn-primary" type="submit">Salva</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Modal Elimina -->
      <div
        class="modal fade"
        tabindex="-1"
        data-bs-target="#exampleModalDelete"
      >
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Elimina {{ animale.nomeAnimale }}</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div class="modal-body">
              Sei sicuro di voler eliminare
              <strong>{{ animale.nomeAnimale }}</strong
              >?
            </div>
            <div class="modal-footer">
              <button class="btn btn-secondary" data-bs-dismiss="modal">
                Annulla
              </button>
              <button class="btn btn-danger" (click)="elimina(animale)">
                Elimina
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
